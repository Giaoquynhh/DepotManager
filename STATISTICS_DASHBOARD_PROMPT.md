Y# ğŸ“Š PROMPT HOÃ€N CHá»ˆNH: Táº¡o Statistics Dashboard

## ğŸ“‹ **Tá»•ng quan dá»± Ã¡n**

Táº¡o má»™t **Statistics Dashboard** (Dashboard thá»‘ng kÃª tá»•ng quan) cho há»‡ thá»‘ng Container Management, hiá»ƒn thá»‹ cÃ¡c chá»‰ sá»‘ thá»‘ng kÃª quan trá»ng vá» container, khÃ¡ch hÃ ng, sá»­a chá»¯a, tÃ i chÃ­nh vÃ  váº­n hÃ nh. Dashboard nÃ y sáº½ phÃ¹ há»£p vá»›i táº¥t cáº£ cÃ¡c role trong há»‡ thá»‘ng (trá»« Partner, Driver, Security).

## ğŸ¨ **Thiáº¿t káº¿ giao diá»‡n**

### **Layout tá»•ng thá»ƒ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HEADER                               â”‚
â”‚  ğŸ“Š Thá»‘ng kÃª tá»•ng quan    [HÃ´m nayâ–¼] [Export] [Refresh] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  QUICK STATS (4 cards ngang)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Containerâ”‚ â”‚KhÃ¡ch hÃ ngâ”‚ â”‚Doanh thuâ”‚ â”‚Sá»­a chá»¯aâ”‚      â”‚
â”‚  â”‚   1,234 â”‚ â”‚    45   â”‚ â”‚ 2.5M VNDâ”‚ â”‚   89   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MAIN CONTENT (2 cá»™t)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Container Statusâ”‚ â”‚ Financial Overviewâ”‚              â”‚
â”‚  â”‚     Chart       â”‚ â”‚                 â”‚              â”‚
â”‚  â”‚                 â”‚ â”‚                 â”‚              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
â”‚  â”‚ Customer Stats  â”‚ â”‚ Maintenance     â”‚              â”‚
â”‚  â”‚                 â”‚ â”‚ Summary         â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BOTTOM TABLES (3 báº£ng)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚Recent Act.  â”‚ â”‚Top Customersâ”‚ â”‚Pending Rep.â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ˆ **CÃ¡c chá»‰ sá»‘ thá»‘ng kÃª cáº§n hiá»ƒn thá»‹**

### **1. Container Statistics**
- **Tá»•ng sá»‘ container**: 1,234
- **Container theo tráº¡ng thÃ¡i**: 
  - PENDING: 45
  - SCHEDULED: 23
  - GATE_IN: 12
  - IN_YARD: 156
  - IN_CAR: 8
  - GATE_OUT: 34
  - COMPLETED: 956
- **Container theo loáº¡i**:
  - IMPORT: 789
  - EXPORT: 445
- **Container hÃ´m nay**: 67
- **Container tuáº§n nÃ y**: 234
- **Container thÃ¡ng nÃ y**: 1,123

### **2. Customer Statistics**
- **Tá»•ng sá»‘ khÃ¡ch hÃ ng**: 45
- **KhÃ¡ch hÃ ng hoáº¡t Ä‘á»™ng**: 38
- **KhÃ¡ch hÃ ng má»›i thÃ¡ng nÃ y**: 3
- **Top 5 khÃ¡ch hÃ ng**:
  1. CÃ´ng ty A - 234 requests - 15.2M VND
  2. CÃ´ng ty B - 189 requests - 12.8M VND
  3. CÃ´ng ty C - 156 requests - 9.5M VND
  4. CÃ´ng ty D - 134 requests - 8.2M VND
  5. CÃ´ng ty E - 98 requests - 6.1M VND

### **3. Maintenance Statistics**
- **Tá»•ng sá»‘ phiáº¿u sá»­a chá»¯a**: 89
- **Phiáº¿u theo tráº¡ng thÃ¡i**:
  - PENDING: 12
  - APPROVED: 23
  - IN_PROGRESS: 15
  - COMPLETED: 35
  - CANCELLED: 4
- **Thá»i gian sá»­a chá»¯a trung bÃ¬nh**: 2.5 ngÃ y
- **Tá»•ng chi phÃ­ sá»­a chá»¯a**: 45.2M VND
- **Váº¥n Ä‘á» thÆ°á»ng gáº·p**:
  1. HÆ° há»ng cá»­a container - 23 láº§n
  2. Lá»—i khÃ³a container - 18 láº§n
  3. HÆ° há»ng Ä‘Ã¡y container - 15 láº§n

### **4. Financial Statistics**
- **Tá»•ng doanh thu**: 125.6M VND
- **Doanh thu thÃ¡ng nÃ y**: 23.4M VND
- **Doanh thu nÄƒm nÃ y**: 125.6M VND
- **Thanh toÃ¡n chÆ°a thu**: 8.9M VND
- **Thanh toÃ¡n quÃ¡ háº¡n**: 2.1M VND
- **GiÃ¡ trá»‹ hÃ³a Ä‘Æ¡n trung bÃ¬nh**: 1.2M VND
- **Doanh thu theo dá»‹ch vá»¥**:
  - PhÃ­ nÃ¢ng/háº¡: 45.2M VND
  - PhÃ­ lÆ°u kho: 32.1M VND
  - PhÃ­ sá»­a chá»¯a: 28.3M VND
  - PhÃ­ khÃ¡c: 20.0M VND

### **5. Operational Statistics**
- **Gate In/Out hÃ´m nay**:
  - Gate In: 34
  - Gate Out: 28
- **Tá»· lá»‡ sá»­ dá»¥ng xe nÃ¢ng**: 78%
- **Tá»· lá»‡ sá»­ dá»¥ng bÃ£i**: 65%
- **Thá»i gian xá»­ lÃ½ trung bÃ¬nh**: 1.2 ngÃ y
- **Tá»· lá»‡ hoÃ n thÃ nh**: 94%

## ğŸ—ï¸ **Cáº¥u trÃºc file cáº§n táº¡o**

### **Backend:**
```
manageContainer/backend/modules/statistics/
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ StatisticsController.ts
â”‚   â””â”€â”€ StatisticsRoutes.ts
â”œâ”€â”€ service/
â”‚   â””â”€â”€ StatisticsService.ts
â”œâ”€â”€ dto/
â”‚   â””â”€â”€ StatisticsDtos.ts
â””â”€â”€ README.md
```

### **Frontend:**
```
manageContainer/frontend/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ Statistics/
â”‚       â””â”€â”€ index.tsx
â”œâ”€â”€ components/statistics/
â”‚   â”œâ”€â”€ StatisticsDashboard.tsx
â”‚   â”œâ”€â”€ StatCard.tsx
â”‚   â”œâ”€â”€ ContainerStatusChart.tsx
â”‚   â”œâ”€â”€ CustomerStatsCard.tsx
â”‚   â”œâ”€â”€ FinancialOverview.tsx
â”‚   â”œâ”€â”€ MaintenanceSummary.tsx
â”‚   â”œâ”€â”€ RecentActivities.tsx
â”‚   â”œâ”€â”€ TopCustomers.tsx
â”‚   â””â”€â”€ PendingRepairs.tsx
â”œâ”€â”€ services/
â”‚   â””â”€â”€ statistics.ts
â””â”€â”€ styles/
    â””â”€â”€ statistics.css
```

## ğŸ” **PhÃ¢n quyá»n theo role**

| Role | Quyá»n xem | Ghi chÃº |
|------|-----------|---------|
| **SystemAdmin, BusinessAdmin** | âœ… Táº¥t cáº£ thá»‘ng kÃª | Xem toÃ n bá»™ há»‡ thá»‘ng |
| **SaleAdmin, YardManager** | âœ… Container + Customer + Operational | KhÃ´ng xem Financial |
| **Accountant** | âœ… Táº¥t cáº£ thá»‘ng kÃª | Xem toÃ n bá»™ + Export |
| **MaintenanceManager** | âœ… Container + Maintenance + Operational | ChuyÃªn vá» báº£o trÃ¬ |
| **CustomerAdmin, CustomerUser** | âš ï¸ Chá»‰ thá»‘ng kÃª cÃ´ng ty mÃ¬nh | Háº¡n cháº¿ theo company |
| **PartnerAdmin, Driver, Security** | âŒ KhÃ´ng cáº§n | KhÃ´ng cáº§n dashboard |

## ğŸ¯ **TÃ­nh nÄƒng chÃ­nh**

### **1. Quick Stats (4 cards ngang)**
- Container tá»•ng
- KhÃ¡ch hÃ ng
- Doanh thu thÃ¡ng
- Sá»­a chá»¯a

### **2. Container Status Chart**
- Biá»ƒu Ä‘á»“ trÃ²n hiá»ƒn thá»‹ container theo tráº¡ng thÃ¡i
- MÃ u sáº¯c phÃ¢n biá»‡t: PENDING (vÃ ng), IN_PROGRESS (xanh), COMPLETED (xanh lÃ¡)

### **3. Customer Stats Card**
- Tá»•ng khÃ¡ch hÃ ng
- KhÃ¡ch hÃ ng má»›i thÃ¡ng nÃ y
- Top 3 khÃ¡ch hÃ ng

### **4. Financial Overview**
- Doanh thu thÃ¡ng nÃ y
- Thanh toÃ¡n chÆ°a thu
- Biá»ƒu Ä‘á»“ doanh thu theo dá»‹ch vá»¥

### **5. Maintenance Summary**
- Tá»•ng phiáº¿u sá»­a chá»¯a
- Thá»i gian sá»­a chá»¯a trung bÃ¬nh
- Váº¥n Ä‘á» thÆ°á»ng gáº·p

### **6. Bottom Tables**
- **Recent Activities**: Hoáº¡t Ä‘á»™ng gáº§n Ä‘Ã¢y
- **Top Customers**: Top khÃ¡ch hÃ ng
- **Pending Repairs**: Phiáº¿u sá»­a chá»¯a chá» xá»­ lÃ½

## ğŸ“± **Responsive Design**

- **Desktop**: Layout 2 cá»™t, hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§
- **Tablet**: Layout 1 cá»™t, cards xáº¿p chá»“ng
- **Mobile**: Cards nhá» gá»n, scroll dá»c

## ğŸš€ **API Endpoints cáº§n táº¡o**

```typescript
// Backend API
GET /statistics/overview?timeRange=today|week|month|year
GET /statistics/containers?timeRange=today|week|month|year
GET /statistics/customers?timeRange=today|week|month|year
GET /statistics/maintenance?timeRange=today|week|month|year
GET /statistics/financial?timeRange=today|week|month|year
GET /statistics/operational?timeRange=today|week|month|year
```

## ğŸ¨ **Styling**

- Sá»­ dá»¥ng CSS Grid vÃ  Flexbox
- MÃ u sáº¯c nháº¥t quÃ¡n vá»›i há»‡ thá»‘ng hiá»‡n táº¡i
- Icons tá»« Heroicons hoáº·c Lucide
- Animations nháº¹ nhÃ ng
- Dark mode support

## ğŸ“Š **Data Sources**

- **Container data**: Tá»« `ServiceRequest` table
- **Customer data**: Tá»« `Customer` table
- **Maintenance data**: Tá»« `RepairTicket` table
- **Financial data**: Tá»« `Invoice` table
- **Operational data**: Tá»« `YardPlacement`, `ForkliftJob` tables

## ğŸ”„ **Real-time Updates**

- Sá»­ dá»¥ng WebSocket Ä‘á»ƒ cáº­p nháº­t real-time
- Auto-refresh má»—i 30 giÃ¢y
- Manual refresh button
- Loading states

## ğŸ“¤ **Export Features**

- Export Excel cho cÃ¡c role cÃ³ quyá»n
- Export PDF cho bÃ¡o cÃ¡o
- Filter theo thá»i gian
- Custom date range

## ğŸ› ï¸ **Implementation Steps**

### **BÆ°á»›c 1: Backend Development**
1. Táº¡o module `statistics` trong backend
2. Implement cÃ¡c API endpoints
3. TÃ­ch há»£p vá»›i database queries
4. ThÃªm authentication vÃ  authorization

### **BÆ°á»›c 2: Frontend Development**
1. Táº¡o trang `Statistics` má»›i
2. Implement cÃ¡c components
3. TÃ­ch há»£p vá»›i API
4. Responsive design

### **BÆ°á»›c 3: Integration & Testing**
1. TÃ­ch há»£p vá»›i há»‡ thá»‘ng phÃ¢n quyá»n
2. Test trÃªn cÃ¡c role khÃ¡c nhau
3. Performance optimization
4. User acceptance testing

## ğŸ“ **Technical Requirements**

### **Backend Technologies:**
- Node.js + TypeScript
- Prisma ORM
- PostgreSQL
- Express.js

### **Frontend Technologies:**
- Next.js + TypeScript
- React Hooks
- CSS Grid/Flexbox
- Chart.js hoáº·c Recharts

### **Database Queries:**
- Aggregate functions cho thá»‘ng kÃª
- JOIN queries cho data liÃªn quan
- Indexing cho performance
- Caching cho real-time data

## ğŸ¯ **Success Criteria**

1. âœ… Dashboard load trong < 2 giÃ¢y
2. âœ… Real-time updates hoáº¡t Ä‘á»™ng
3. âœ… Responsive trÃªn táº¥t cáº£ devices
4. âœ… PhÃ¢n quyá»n chÃ­nh xÃ¡c theo role
5. âœ… Export data thÃ nh cÃ´ng
6. âœ… UI/UX nháº¥t quÃ¡n vá»›i há»‡ thá»‘ng

---

**NgÃ y táº¡o:** 2024-12-19  
**PhiÃªn báº£n:** 1.0  
**TÃ¡c giáº£:** Development Team  
**Tráº¡ng thÃ¡i:** ğŸ“‹ Ready for Implementation
